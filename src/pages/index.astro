---
import Blocks from "@/components/Blocks.astro";
import usePage from "@/hooks/usePage";
import Layout from "@/layouts/Layout.astro";
import { getBlockNames } from "@/utils/parsing";

const { fetchPageByDocId, fetchAllPages } = await usePage();
const { pages, defaultLocale } = await fetchAllPages();
const homeDocId = pages.find((page) => {
  if (page.slug === "home") return page.documentId;
});
const blocks = await fetchPageByDocId(homeDocId?.documentId);
---

<Layout>
  <Blocks blocks={blocks} blockNames={getBlockNames(blocks, defaultLocale)} />
</Layout>
