---
import CounterReact from "@/components/atoms/CounterReact";
import Blocks from "@/components/Blocks.astro";
import getPages from "@/hooks/useAllPages";
import usePage from "@/hooks/usePage";
import Layout from "@/layouts/Layout.astro";

const { fetchPageByDocId } = await usePage();
const { pages } = await getPages();
const homeDocId = pages.find((page) => {
  if (page.slug === "home") return page.documentId;
});
const blocks = await fetchPageByDocId(homeDocId?.documentId);
console.log("blocks", blocks);
---

<Layout>
  <Blocks block={blocks} />
  <CounterReact client:load />
</Layout>
